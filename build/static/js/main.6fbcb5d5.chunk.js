(this["webpackJsonpagri-react"]=this["webpackJsonpagri-react"]||[]).push([[0],{153:function(e,t){},158:function(e,t,n){},191:function(e,t,n){},193:function(e,t,n){},198:function(e,t){},204:function(e,t,n){},205:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(73),s=n.n(c),o=(n(191),n(11)),i=n.n(o),u=n(18),l=n(10),j=(n(193),n(158),n(6));var d=n(0),b=n(17),g=n(228),h=n(230),O=n(154),f="http://localhost:3001/",p="http://127.0.0.1:5000",x=n(168),v=n(227),m=["ar","en"],y={OffCanvasHeader:{ar:"\u0645\u0635\u0631",en:"Egypt"},CityDropDownTitle:{ar:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629",en:"City"},GovDropDownTitle:{ar:"\u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0629",en:"Governorate"},DateDropDownTitle:{ar:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e",en:"Date"},LangDropDownTitle:{ar:"\u0627\u0644\u0644\u063a\u0629",en:"Language"},ResourcesLegend:{metrics:{ar:"\u0643\u0645",en:"km"},blue:{ar:"\u0627\u0644\u0645\u064a\u0627\u0629",en:"Aqua"},green:{ar:"\u0627\u0644\u0632\u0631\u0627\u0639\u0629",en:"Agriculture"},yellow:{ar:"\u0627\u0644\u0635\u062d\u0631\u0627\u0621",en:"Sand/Rocks"},magenta:{ar:"\u0627\u0644\u0639\u0645\u0631\u0627\u0646",en:"Urban"},purple:{ar:"\u0627\u0644\u0637\u0631\u0642",en:"Roads"}},OffCanvasButton:{ar:"\u0627\u062a\u0635\u0644 \u0628\u0646\u0627",en:"Contact Us"},SignInButton:{ar:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",en:"Login"},DashboardButton:{ar:"\u0644\u0648\u062d\u0629 \u0627\u0644\u0642\u064a\u0627\u062f\u0629",en:"Dashboard"}};var w=function(e){var t=e.lang,n=e.govs,a=e.fetchSelection;return Object(j.jsxs)(v.a,{children:[Object(j.jsx)(v.a.Toggle,{variant:"dark",id:"dropdown-basic",children:y.GovDropDownTitle[t]}),Object(j.jsxs)(v.a.Menu,{style:{overflowY:"scroll",maxHeight:"300px"},children:[Object(j.jsx)(v.a.Item,{href:"/",children:"All Governorates"}),n.map((function(e){return Object(j.jsx)(v.a.Item,{onClick:function(){a(e)},children:e.replace(/-/g," ")})}))]})]})};var S=function(e){var t=e.lang,n=e.dates;return Object(j.jsxs)(v.a,{children:[Object(j.jsx)(v.a.Toggle,{variant:"dark",id:"dropdown-basic",children:y.DateDropDownTitle[t]}),Object(j.jsx)(v.a.Menu,{style:{overflowY:"scroll",maxHeight:"300px"},children:n.map((function(e){return Object(j.jsx)(v.a.Item,{href:"#",children:e})}))})]})},L=[22.8357675,32.8357675],k=[22.5,31.1956597],C={longitude:31.2,latitude:27.8025,zoom:6,pitch:10,bearing:0,transitionDuration:900,transitionInterpolator:new O.a(20),minZoom:6,maxZoom:14},R=Object(a.memo)((function(e){var t,n=e.lang,r=e.dates,c=e.govs,s=e.data,o=e.fetchSelection,i=(e.Country,e.toggleOffCanvasFunc),u=Object(a.useState)({}),f=Object(l.a)(u,2),p=f[0],v=f[1],m=Object(a.useState)(C),R=Object(l.a)(m,2),D=R[0],T=R[1],I=Object(a.useState)([{}]),A=Object(l.a)(I,2),E=A[0],F=A[1],M=Object(a.useState)(-1),B=Object(l.a)(M,2),G=B[0],P=B[1],W=Object(a.useState)({}),H=Object(l.a)(W,2),_=H[0],q=H[1];Object(a.useEffect)((function(){F(s)}),[s]),Object(a.useEffect)((function(){if(-1!=p.index){var e=p.index,t=Object(b.a)(E);void 0!=t[e]&&(e!=G&&-1!=G&&(t[G].lineWeight=1,t[G].color=[240,240,240,20]),t[e].lineWeight=10,t[e].color=[100,40,40,15],P(e),F(t))}else{var n=Object(b.a)(E);void 0!=n[G]&&(n[G].lineWeight=1,n[G].color=[240,240,240,20],F(n))}}),[p]),Object(a.useEffect)((function(){var e=_.index,t=Object.assign({},C);if(void 0!=E[e]){var n=_.object.name;o(n),D.zoom<8&&(t.longitude=_.coordinate[0],t.latitude=_.coordinate[1],t.zoom=10.5,T(t))}}),[_]);new h.a({id:"PolygonLayer",data:E,elevationScale:1,extruded:!1,filled:!0,getLineColor:[200,80,80],getLineWidth:function(e){return 100},getPolygon:function(e){return e.contour},lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthMinPixels:1,stroked:!0,wireframe:!0,pickable:!0});return Object(j.jsxs)(g.a,(t={viewState:D,onViewStateChange:function(e){return T(e.viewState)},controller:!0},Object(d.a)(t,"onViewStateChange",(function(e){var t=e.viewState;t.longitude=Math.min(L[1],Math.max(L[0],t.longitude)),t.latitude=Math.min(k[1],Math.max(k[0],t.latitude)),T(t)})),Object(d.a)(t,"children",[Object(j.jsx)(h.a,{id:"PolygonLayer",data:E,elevationScale:1,extruded:!1,getLineWidth:function(e){return function(e){return e.lineWeight}(e)},filled:!0,getFillColor:function(e){return e.color},pickable:!0,getLineColor:function(e){return[0,0,0]},getPolygon:function(e){return e.contour},onHover:function(e){return v(e)},onClick:function(e){return q(e)}}),Object(j.jsx)(O.b,{mapboxApiAccessToken:"pk.eyJ1IjoiZG9uem9tYTA5IiwiYSI6ImNrcno0djVqNjAwMGEyd3BjanVuY2hqMGIifQ.sOkp8Uufulj_dbEEpHrh3w"}),Object(j.jsxs)("div",{style:{display:"flex",float:"left",margin:"1rem",padding:"0",position:"static",justifyContent:"space-around",width:"25%"},children:[Object(j.jsx)(w,{lang:n,govs:c,fetchSelection:o}),Object(j.jsx)(S,{lang:n,dates:r}),Object(j.jsx)(x.a,{onClick:function(){return i()},children:y.DashboardButton[n]})]})]),t))})),D=n(223),T=n(224),I=n(231),A=n(235),E=n(173),F=n.n(E);var M=function(e){var t=e.lang,n=e.resources,r=Object(a.useState)([y.ResourcesLegend.blue[t],y.ResourcesLegend.green[t],y.ResourcesLegend.yellow[t],y.ResourcesLegend.magenta[t],y.ResourcesLegend.purple[t]]),c=Object(l.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)([n.aqua,n.agriculture_land,n["sand-rocks"],n["urban-land"],n.road]),u=Object(l.a)(i,2),d=u[0],b=u[1];Object(a.useEffect)((function(){o([y.ResourcesLegend.blue[t],y.ResourcesLegend.green[t],y.ResourcesLegend.yellow[t],y.ResourcesLegend.magenta[t],y.ResourcesLegend.purple[t]]),b([n.aqua,n.agriculture_land,n["sand-rocks"],n["urban-land"],n.road])}),[t,n]);var g=Object(a.useState)({series:d,labels:s}),h=Object(l.a)(g,2),O=h[0];return h[1],console.log(),Object(j.jsx)(F.a,{options:O,series:d,categories:s,type:"donut",width:"350",style:{float:"right",display:"flex",color:"white"},chartOptions:{labels:s}})};var B=n(234),G=n(222),P=n(232);var W=function(e){var t=e.lang;return Object(j.jsx)(B.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(j.jsxs)(G.a,{children:[Object(j.jsx)(B.a.Brand,{href:f,children:Object(j.jsx)("strong",{children:"EG-Agri-Project"})}),Object(j.jsx)(B.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(j.jsxs)(B.a.Collapse,{id:"responsive-navbar-nav",children:[Object(j.jsx)(P.a,{className:"me-auto"}),Object(j.jsx)(P.a,{children:Object(j.jsx)(P.a.Link,{eventKey:2,href:"#memes",children:y.SignInButton[t]})})]})]})})},H=n(225);n(204);function _(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function q(e){var t=e.lang,n=e.title,a=e.value,r=e.variant;return Object(j.jsx)(H.a,{variant:r,style:{height:"4.5rem",width:"100%",textAlign:"center",justifyContent:"center",display:"flex"},children:Object(j.jsx)("p",{children:Object(j.jsxs)("strong",{children:["en"===t?Object(j.jsxs)("div",{children:[n,": "]}):Object(j.jsxs)("div",{children:[":",n," "]}),"en"===t?Object(j.jsxs)("span",{children:[a," ",y.ResourcesLegend.metrics[t],Object(j.jsx)("sup",{children:"2"})]}):Object(j.jsxs)("span",{children:[Object(j.jsxs)("span",{children:[y.ResourcesLegend.metrics[t],Object(j.jsx)("sup",{children:"\u0662"})," "]}),a]})]})})})}var N=function(e){var t=e.lang,n=e.resources;return Object(j.jsxs)("div",{children:[Object(j.jsxs)(D.a,{children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(q,{variant:"info",title:y.ResourcesLegend.blue[t],value:_(n.aqua),lang:t})}),Object(j.jsx)(T.a,{children:Object(j.jsx)(q,{variant:"success",title:y.ResourcesLegend.green[t],value:_(n.agriculture_land),lang:t})})]}),Object(j.jsxs)(D.a,{children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(q,{variant:"warning",title:y.ResourcesLegend.yellow[t],value:_(n["sand-rocks"]),lang:t})}),Object(j.jsx)(T.a,{children:Object(j.jsx)(q,{variant:"danger",title:y.ResourcesLegend.magenta[t],value:_(n["urban-land"]),lang:t})})]}),Object(j.jsx)(q,{variant:"primary",title:y.ResourcesLegend.purple[t],value:_(n.road),lang:t})]})},z=function(e){var t=e.setStateFunc,n=e.lang;return Object(j.jsxs)(v.a,{children:[Object(j.jsx)(v.a.Toggle,{variant:"Success",id:"dropdown-basic",style:{color:"white"},children:n}),Object(j.jsx)(v.a.Menu,{children:m.map((function(e){return Object(j.jsx)(v.a.Item,{onClick:function(){return t(e)},href:"#",children:e})}))})]})};var V=function(e){var t=e.lang,n=e.setLangStateFunc,r=e.resources,c=e.resourcesTitle,s=e.imgpath,o=e.showCanvas,i=Object(a.useState)(!0),u=Object(l.a)(i,2),d=(u[0],u[1]),b=Object(a.useState)(s),g=Object(l.a)(b,2),h=g[0],O=g[1];return Object(a.useEffect)((function(){O(s)}),[s]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(I.a,{show:o,onHide:function(){return d(!1)},placement:"end",scroll:!0,backdrop:!1,style:{backgroundColor:"#6A7A7F",color:"white"},children:[Object(j.jsx)(W,{lang:t}),Object(j.jsxs)(I.a.Header,{style:{paddingTop:"0",paddingBottom:"2px"},children:[Object(j.jsx)(I.a.Title,{style:{display:"flex",color:"white"},children:Object(j.jsx)("strong",{children:y.OffCanvasHeader[t]})}),Object(j.jsx)(z,{setStateFunc:n,lang:t})]}),Object(j.jsxs)(I.a.Body,{children:[Object(j.jsx)(M,{lang:t,resources:r}),Object(j.jsxs)("div",{style:{textAlign:"center"},children:[Object(j.jsx)("h6",{children:c}),Object(j.jsx)(N,{resources:r,lang:t})]}),Object(j.jsx)(A.a,{style:{textAlign:"center"},children:Object(j.jsx)(A.a.Image,{width:"100%",src:"http://127.0.0.1:5000/"+h})})]})]})})};n(226);var Y=function(){var e=Object(a.useState)("en"),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(l.a)(c,2),o=s[0],d=s[1],b=Object(a.useState)([]),g=Object(l.a)(b,2),h=g[0],O=g[1],f=Object(a.useState)({agriculture_land:0,aqua:0,road:0,"sand-rocks":0,trees:0,unknown:0,"urban-land":0}),x=Object(l.a)(f,2),v=x[0],m=x[1],y=Object(a.useState)(!0),w=Object(l.a)(y,2),S=(w[0],w[1]),L=Object(a.useState)(!1),k=Object(l.a)(L,2),C=(k[0],k[1],Object(a.useState)([{}])),I=Object(l.a)(C,2),A=I[0],E=I[1],F=Object(a.useState)("All Governorates"),M=Object(l.a)(F,2),B=M[0],G=M[1],P=Object(a.useState)(""),W=Object(l.a)(P,2),H=W[0],_=W[1],q=Object(a.useState)("static/imgs/mash_abohomos.png"),N=Object(l.a)(q,2),z=N[0],Y=N[1],U=Object(a.useState)(!0),J=Object(l.a)(U,2),Q=J[0],Z=J[1];function K(){return(K=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),G(t),_(t),e.next=5,fetch(p+"/resources/"+t).then((function(e){return e.json()})).then((function(e){m(e.resource),S(!1),void 0!=e.imgURI?Y(e.imgURI):Y("")}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(p+"/date/all").then((function(e){return e.json()})).then((function(e){O(Object.keys(e))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(p+"/date/all").then((function(e){return e.json()})).then((function(e){var t=[];for(var n in e)t.push(e[n]);d(t)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(p+"/resources/all").then((function(e){return e.json()})).then((function(e){m(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t(),n(),S(!1)}),[]),Object(a.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p+"/governorate/all").then((function(e){return e.json()})).then((function(e){var t=[];for(var n in e)"MultiPolygon"!=e[n].type&&t.push({contour:e[n].cord,lineWeight:1,name:e[n].name,type:e[n].type,color:[240,240,240,20]});return console.log(t),t})).then((function(e){E(e),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("header",{}),Object(j.jsx)("body",{children:Object(j.jsx)("div",{style:{margin:"1rem 0",justifyContent:"space-between"},children:Object(j.jsxs)(D.a,{children:[Object(j.jsx)(T.a,{s:12,md:7,children:Object(j.jsx)(R,{toggleOffCanvasFunc:function(){Z(!Q)},lang:n,dates:o,govs:h,fetchSelection:function(e){return K.apply(this,arguments)},setLoadingFunc:S,setResourcesTitle:G,data:A,Country:H})}),Object(j.jsx)(T.a,{s:12,md:5,children:Object(j.jsx)(V,{showCanvas:Q,imgpath:z,setLangStateFunc:r,lang:n,resources:v,setLoadingFunc:S,resourcesTitle:B})})]})})})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,237)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(j.jsxs)(r.a.StrictMode,{children:[Object(j.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css",integrity:"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC",crossorigin:"anonymous"}),Object(j.jsx)(Y,{})]}),document.getElementById("root")),U()}},[[205,1,2]]]);
//# sourceMappingURL=main.6fbcb5d5.chunk.js.map